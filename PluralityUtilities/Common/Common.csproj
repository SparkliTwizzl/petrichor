<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<TargetFramework>net7.0</TargetFramework>
		<ImplicitUsings>enable</ImplicitUsings>
		<Nullable>enable</Nullable>
		<AssemblyName>$(SolutionName).$(MSBuildProjectName)</AssemblyName>
		<RootNamespace>$(SolutionName).$(MSBuildProjectName)</RootNamespace>
	</PropertyGroup>

	<PropertyGroup>
		<ProjectPreBuildOutputDir>"$(SolutionDir)$(MSBuildProjectName)\$(PreBuildOutputDir)"</ProjectPreBuildOutputDir>
		<AppVersionClass>"$(ProjectPreBuildOutputDir)AppVersion.cs"</AppVersionClass>
		<ProjectDirectoriesClass>"$(ProjectPreBuildOutputDir)ProjectDirectories.cs"</ProjectDirectoriesClass>
	</PropertyGroup>

	<Target Name="PreBuild" BeforeTargets="PreBuildEvent">
		<Exec Command="if not exist $(ProjectPreBuildOutputDir) mkdir $(ProjectPreBuildOutputDir)" />
		<Exec Command="@echo $(AutoGeneratedFileNotice)&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo.&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo using System.Reflection;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo.&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo.&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo namespace $(SolutionName).$(MSBuildProjectName)&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo {&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 	public static class ProjectDirectories&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 	{&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string BuildDir = $@&quot;{ExecutingDir}$(BuildDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string ExecutingDir = $@&quot;{Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)}\&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string LogDir = $@&quot;{ExecutingDir}$(LogDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string OutputDir = $@&quot;{ExecutingDir}$(OutputDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string TestDir = $@&quot;{ExecutingDir}$(TestDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string TestInputDir = $@&quot;{ExecutingDir}$(TestInputDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string TestLogDir = $@&quot;{ExecutingDir}$(TestLogDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 		public static readonly string TestOutputDir = $@&quot;{ExecutingDir}$(TestOutputDir)&quot;;&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo 	}&gt;&gt; $(ProjectDirectoriesClass)" />
		<Exec Command="@echo }&gt;&gt; $(ProjectDirectoriesClass)" />
	</Target>

	<Target Name="PreBuild" BeforeTargets="PreBuildEvent">
		<Exec Command="if not exist $(ProjectPreBuildOutputDir) mkdir $(ProjectPreBuildOutputDir)" />
		<Exec Command="@echo $(AutoGeneratedFileNotice)&gt; $(AppVersionClass)" />
		<Exec Command="@echo.&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo.&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo namespace $(SolutionName).$(MSBuildProjectName)&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo {&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo 	public static class AppVersion&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo 	{&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo 		public const string CurrentVersion = &quot;$(CurrentVersion)&quot;;&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo 	}&gt;&gt; $(AppVersionClass)" />
		<Exec Command="@echo }&gt;&gt; $(AppVersionClass)" />
	</Target>

	<ItemGroup>
	  <ProjectReference Include="..\Logging\Logging.csproj" />
	</ItemGroup>

</Project>
